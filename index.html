<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JWT Token Analyzer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body{
    margin:0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#1e1e2f,#2b2b45);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
  }
  .card{
    background:#ffffff;
    color:#000;
    width:95%;
    max-width:750px;
    border-radius:14px;
    padding:18px;
    box-shadow:0 20px 40px rgba(0,0,0,.35);
  }
  h2{
    margin-top:0;
    text-align:center;
  }
  textarea{
    width:100%;
    min-height:110px;
    padding:10px;
    border-radius:8px;
    border:2px solid #ccc;
    resize:vertical;
    font-size:13px;
  }
  .btn{
    border:none;
    padding:12px 16px;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
    margin-top:10px;
  }
  .btn-orange{
    background:#ff9800;
    color:#000;
    width:100%;
  }
  .btn-blue{
    background:#2196f3;
    color:#fff;
  }
  pre{
    background:#f5f5f5;
    padding:12px;
    border-radius:10px;
    font-size:12px;
    white-space:pre-wrap;
    word-break:break-all;
    margin-top:15px;
  }
  .status{
    font-weight:bold;
    margin-top:10px;
  }
</style>
</head>
<body>

<div class="card">
  <h2>üîé JWT TOKEN ANALYZER</h2>

  <textarea id="tokenInput" placeholder="ENTER YOUR TOKEN FOR ANALYSIS üåö."></textarea>

  <button class="btn btn-orange" onclick="analyzeToken()">
    GO TO ANALYSIS üöÄ.
  </button>

  <div id="result"></div>
</div>

<script>
function isJWT(t){
  return t && t.indexOf("eyJ")===0 && t.split(".").length===3;
}
function decode(s){
  s=s.replace(/-/g,'+').replace(/_/g,'/');
  while(s.length%4)s+='=';
  return JSON.parse(atob(s));
}

function analyzeToken(){
  const token=document.getElementById("tokenInput").value.trim();
  const out=document.getElementById("result");
  out.innerHTML="";

  if(!isJWT(token)){
    out.innerHTML="<div class='status'>‚ùå Invalid JWT Token</div>";
    return;
  }

  let header={},payload={},status="Unknown",mins="‚Äî";
  try{
    const parts=token.split(".");
    header=decode(parts[0]);
    payload=decode(parts[1]);

    const now=Math.floor(Date.now()/1000);
    const exp=payload.exp||0;
    if(exp){
      if(exp<now) status="‚ùå Expired";
      else if(exp-now<1800) status="‚ö†Ô∏è Expiring Soon";
      else status="‚úÖ Valid";
      mins=Math.floor((exp-now)/60);
    }
  }catch(e){
    out.innerHTML="<div class='status'>‚ùå Decode Error</div>";
    return;
  }

  out.innerHTML=
    "<div class='status'>"+status+" | Expires in "+mins+" min</div>"+
    "<pre>"+
    "HEADER:\n"+JSON.stringify(header,null,2)+
    "\n\nPAYLOAD:\n"+JSON.stringify(payload,null,2)+
    "\n\nEXTRACTED DETAILS:\n"+
    "- Mobile / Username: "+(payload.username||payload.mobile||payload.phone||"‚Äî")+"\n"+
    "- Email: "+(payload.email||"‚Äî")+"\n"+
    "- Name: "+((payload.firstName||"")+" "+(payload.lastName||"")).trim()+"\n"+
    "- Organization: "+(payload.organization&&payload.organization.name||"‚Äî")+"\n"+
    "- User Type: "+(payload.type||"‚Äî")+
    "</pre>"+
    "<button class='btn btn-blue' onclick=\"navigator.clipboard.writeText('"+token+"')\">üìã Copy Token</button>";
}
</script>

</body>
</html>
